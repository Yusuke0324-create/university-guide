{% extends 'base.html' %}
{% load static %}

{% block title %}{{ organization.name }} | 団体紹介{% endblock %}

{% block contents %}
<div class="w-full bg-gray-50 min-h-screen py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        
        {#団体ヘッダー#}
        <div class="bg-white rounded-2xl shadow-sm p-8 mb-10 text-center border border-gray-100">
            {% if organization.image %}
                <img src="{{ organization.image.url }}" alt="{{ organization.name }}" class="w-32 h-32 mx-auto rounded-full object-cover mb-4 shadow-md">
            {% else %}
                <div class="w-32 h-32 mx-auto rounded-full bg-indigo-100 flex items-center justify-center mb-4 text-indigo-500 shadow-inner">
                    <span class="text-4xl font-bold">{{ organization.name|slice:":1" }}</span>
                </div>
            {% endif %}

            <div class="text-indigo-500 font-bold tracking-widest uppercase text-xs mb-2">
                {{ organization.get_type_display }}
            </div>
            
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800 mb-4">
                {{ organization.name }}
            </h1>

            {% if organization.professor %}
                <p class="text-gray-600 font-medium mb-4">
                    指導教員: {{ organization.professor }} 先生
                </p>
            {% endif %}

            {% if organization.description %}
                <p class="text-gray-500 text-sm leading-relaxed max-w-2xl mx-auto">
                    {{ organization.description|linebreaksbr }}
                </p>
            {% endif %}
        </div>

        {#記事一覧リスト#}
        <h2 class="text-xl font-bold text-gray-800 mb-6 px-2 border-l-4 border-indigo-500 pl-3">
            この団体の記事一覧
        </h2>

        <div class="space-y-6">
            {% for blog in blogs %}
            <article class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition duration-300">
                <a href="{% url 'campus_guide:blog_detail' blog.pk %}" class="block p-6 sm:p-8">
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-2xl font-bold text-gray-800 hover:text-indigo-600 transition line-clamp-2">
                            {{ blog.title }}
                        </h3>
                    </div>
                    
                    {#カテゴリタグ#}
                    <div class="mb-4 flex flex-wrap gap-2">
                        {% for cat in blog.categories.all %}
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600">
                            # {{ cat.name }}
                        </span>
                        {% endfor %}
                    </div>

                    <div class="text-gray-600 leading-relaxed line-clamp-3 mb-4 text-sm">
                        {{ blog.content|striptags }}
                    </div>

                    <div class="flex items-center justify-between mt-4">
                        <div class="flex items-center text-indigo-600 font-bold text-sm">
                            Read more &rarr;
                        </div>
                        <div class="text-gray-400 text-xs">
                            {{ blog.created_at|date:"Y.m.d" }}
                        </div>
                    </div>
                </a>
            </article>
            {% empty %}
                <div class="text-center py-20 bg-white rounded-2xl border-2 border-dashed border-gray-200">
                    <p class="text-gray-500 font-medium">まだ記事が投稿されていません。</p>
                </div>
            {% endfor %}
        </div>

        {#戻るボタン#}
        <div class="text-center mt-16">
            <a href="{% url 'campus_guide:university_list' %}" class="inline-flex items-center text-gray-500 hover:text-indigo-600 font-medium transition bg-white px-6 py-3 rounded-full shadow-sm hover:shadow">
                &larr; トップに戻る
            </a>
        </div>
    </div>
</div>
{% endblock %}